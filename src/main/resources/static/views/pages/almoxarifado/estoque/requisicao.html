<meta charset="UTF-8">
<br>
<br>
<div class="generic-container"	ng-controller="estoqueController as estoqueCtrl">
	<div class="box box-primary">
		<div class="box-header">
			<span class="lead"> Requisição de mercadorias </span>
		</div>
		<div class="panel-body">
		<br>
			<div class="container col-sm-12 ">
				<form role="form-vertical"
					ng-submit="estoqueCtrl.salva()">

					
						<label  class="radio-inline"><input type="radio"  ng-model="tipo.tipo" value="casa" ng-click="estoqueCtrl.tipoConf()" name="optradio">Casa</label>
						<label  class="radio-inline"><input type="radio"  ng-model="tipo.tipo" value="edificio" ng-click="estoqueCtrl.tipoConf()" name="optradio">Edificio</label>
						<label class="radio-inline"><input type="radio"   ng-model="tipo.tipo" value="comunitaria" ng-click="estoqueCtrl.tipoConf()" name="optradio">Edificações Comunitaria</label> 
					<br>
					<br>
					
					<div class="row" ng-if="casa">
						
						<div class="col-sm-4"  >
							<select class="form-control select2" style=" width: 100%;" ng-model="estoqueCtrl.NumeroCasa"  required>
								<option value="">---Casa---</option>
							</select>
						</div>
							<div class="col-sm-4"  >
							<select class="form-control select2" style=" width: 100%;" ng-model="estoqueCtrl.andar"  required>
								<option value="">---Andar---</option>
							</select>
						</div>

					</div>

					<div ng-if="edificio" class="row" ng-controller="configEmpreendimentoController as configCtrl" ng-init="configCtrl.quantidadeEdificio()">
							<div class="col-sm-4"  >
							<select class="form-control select2" style=" width: 100%;"  ng-model="estoqueCtrl.torre"
							 ng-options="lista for lista in configCtrl.qtdeEdificio.quantidadeTorres" 
							 title="Selecione a torre a qual será atribuido a saida do produto" required>
								<option value="">---Torre---</option>
							</select> 
							
						</div>
						<div class="col-sm-4"  >
								<select class="form-control select2" style=" width: 100%;"  ng-model="estoqueCtrl.andar"
							 ng-options="lista for lista in configCtrl.qtdeEdificio.quantidadeAndares"
							 title="Selecione o andar a qual será atribuido a saída do produto" required>
								<option value="">---Andar---</option>
							</select> 
						</div>
	
							<div class="col-sm-4"  >
							 <select class="form-control select2" style=" width: 100%;"  ng-model="estoqueCtrl.apartamento"
							 ng-options="lista for lista in configCtrl.qtdeEdificio.quantidadeApartamentos" 
							 title="Selecione o apartamento a qual será atribuido a saída do produto" required>
								<option value="">---Apartamento---</option>
							</select> 
						</div>
					</div>
								
					<div class="row" ng-if="comunitaria">					
						<div class="col-sm-5"  ng-controller="configEmpreendimentoController as configCtrl"  ng-init="configCtrl.listaOutros()">
							<select class="form-control select2" style=" width: 100%;" ng-model="config"
							 ng-options="lista.descricao for lista in configCtrl.listaOutros" required>
								<option value="">---Edificações Comunitaria---</option>
							</select> 
						</div>						
					</div>
					<br>
					<div class="row">
						<div class="col-sm-3">
							<input type="text" class="form-control" name="leitor" placeholder="Leitor de Código de Barras">
						</div>
					</div>
					<br> <br>
					<div class="row" ng-init="estoqueCtrl.listaProdutosComEstoque()">
						
						<div class="col-sm-3"  >
						<!-- 	<select class="form-control select2" ng-model="produto"  id="descricaoProduto"
							ng-options="listaProduto.produto.descricao for listaProduto in estoqueCtrl.listaProdutos" 
							  style=" width: 100%;" required>
								<option value="">---Produto---</option>
							</select> -->
					
					
							  <md-autocomplete 
							 	md-selected-item="produto" 
							 	md-search-text="estoqueCtrl.searchText" 
							 	md-selected-item-change="estoqueCtrl.selectedItemChange(listaProduto.produto)" 
							 	md-items=" listaProduto in estoqueCtrl.listaProdutos | filter : estoqueCtrl.searchText" 
							 	md-item-text="listaProduto.produto.descricao" 
							 	md-min-length="0" placeholder="busca produto">
       							 <md-item-template>
          							<span md-highlight-text="estoqueCtrl.searchText" md-highlight-flags="^i">{{listaProduto.produto.descricao}}</span>
       							 </md-item-template>        								
     						 </md-autocomplete>
     						
     					
						</div>
						<div class="col-sm-3" ng-controller="areaProdutoController as areaProdutoCtrl" ng-init="areaProdutoCtrl.lista()">						
						<!-- 	<md-input-container>
							 <label>Area de aplicação</label>
							<md-select placeholder="Area de aplicação" ng-model="config"  style="min-width: 200px;">
     							 <md-option ng-value="listaAreaProdutos" ng-repeat="listaAreaProdutos in areaProdutoCtrl.listaAreaProduto">{{listaAreaProdutos.descricao}}</md-option>
    						</md-select>
							<md-input-container> -->
							<select class="form-control select2" ng-model="estoqueCtrl.areaProduto" id="teste"
								ng-options="listaAreaProdutos.descricao for listaAreaProdutos in areaProdutoCtrl.listaAreaProduto" 
							  	style=" width: 100%;" required >
								<option value="">---Area de aplicação---</option>
							</select> 
							
						</div>	
						<div class="col-sm-2">
						
							
							<input class="form-control" ng-model="produto.quantidade.quantidade" type="text" id="quantidadeEstoque" ui-number-mask="0" disabled placeholder="Quantidade estoque">
						
						</div>
						
						<div class="col-sm-2">
						
							
							<input class="form-control" ng-model="quantidade" type="text" id="quantidadeTeste" ui-number-mask="0" placeholder="Quantidade saida" required>
						
						</div>
						<div class="col-sm-2">
							<input class="btn btn-lg btn-primary btn-block btn-signin"
								ng-click=" estoqueCtrl.adicionarProduto(produto.quantidade.quantidade, produto.produto , estoqueCtrl.areaProduto, quantidade,  estoqueCtrl.andar, estoqueCtrl.torre , estoqueCtrl.apartamento, estoqueCtrl.NumeroCasa)" value="adicionar"
								title="pressione para adicionar a lista" type="button" ng-disabled="!produto" >
						</div>
					</div>
					
					<br> <br>

					
						<div ng-show="ativaTabela" >
							<table class="table table-hover ">
								<thead>
									<tr>
										<th>Selecionar</th>
										<th>Descrição</th>
										<th>Area Aplicação</th>
										<th>Quantidade estoque</th>
										<th>Quantidade saida</th>
										<th>Restam</th>
										

									</tr>
								</thead>
								<tbody ng-repeat="produto in estoqueCtrl.listaProduto" ng-model="selecionado">
									<tr>
										<td><input type="checkbox" ng-model="produto.selecionado"
											ng-click="estoqueCtrl.ativarExcluirLote(estoqueCtrl.listaProduto)"></td>
										<td>{{produto.produto.descricao}}</td>	
										<td>{{produto.areaProduto.descricao}}</td>									
										<td>{{produto.quantidadeEstoque}}</td>
										<td>{{produto.quantidadeSaida}}</td>
										<td>{{produto.quantidadeEstoque - produto.quantidadeSaida}}</td>
										
									</tr>
								</tbody>
								<tfoot>
									<tr>
										<th><input type="button" class="btn-danger"
											ng-if="ativadoExcluirLote" value="excluir" name="apagar"
											ng-click=" estoqueCtrl.apagarProduto(estoqueCtrl.listaProduto)"></th>
									</tr>
								</tfoot>
							</table>
						</div>
					
					<br>
					<div class="row">
						<div class="col-sm-5" ng-controller="prestadoraServicoController as prestadoraCtrl" ng-init="prestadoraCtrl.lista()">			
						<select class="form-control "   width: 100%;" ng-model="servicoCtrl.servicoEdifico.prestadoraServico"
							 ng-options="lista.dadoEmpresa.nomeFantasia for lista in prestadoraCtrl.prestadoraServicos" 
							 title="Selecione o pacote de serviço a ser atribuido a empresa" required>
								<option value="">---Prestadora de Serviço---</option>
							</select>
						</div>
					</div>
					<br>
					<div class="row">
						<div class="col-sm-12">
							<input type="text" class="form-control" name="responsavelRetirar" placeholder="Responsável pela retirada dos produtos">
						</div>
					</div>
					<br> 
				
					<br>
					
					<div class="row ">
						
							<button type="submit" name="submit" 
								class="btn btn-lg btn-primary btn-block btn-signin">Cadastrar</button>
						
					</div>				
					
				</form>
			</div>
			<div class="tablecontainer"></div>
		</div>
	</div>
	</div>